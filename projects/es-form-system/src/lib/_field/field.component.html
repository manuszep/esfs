<div class="esfs-field">
  @switch (control.fieldType) {
    @case ('address') {
      <esfs-address
        #fld
        [name]="name"
        [form]="form"
        [control]="$any(control)"
      ></esfs-address>
    }
    @case ('text') {
      <esfs-text
        #fld
        [name]="name"
        [form]="form"
        [control]="$any(control)"
      ></esfs-text>
    }

    @case ('number') {
      <esfs-number
        #fld
        [name]="name"
        [form]="form"
        [control]="$any(control)"
      ></esfs-number>
    }

    @case ('checkbox') {
      <esfs-checkbox
        #fld
        [name]="name"
        [form]="form"
        [control]="$any(control)"></esfs-checkbox>
    }

    @case ('dropdown') {
      <esfs-dropdown
        #fld
        [name]="name"
        [form]="form"
        [control]="$any(control)"></esfs-dropdown>
    }

    @case ('date') {
      <esfs-date
        #fld
        [name]="name"
        [form]="form"
        [control]="$any(control)"></esfs-date>
    }

    @case ('phone') {
      <esfs-phone
        #fld
        [name]="name"
        [form]="form"
        [control]="$any(control)"></esfs-phone>
    }

    @case ('radio') {
      <esfs-radio
        #fld
        [name]="name"
        [form]="form"
        [control]="$any(control)"></esfs-radio>
    }
  }

  @if (control.errors && (control.dirty || control.touched)) {
    <div class="esfs-field__error">
      {{ control.errors | esfsFormError : control.keyPrefix() + '.' + name }}
    </div>
  }
</div>
